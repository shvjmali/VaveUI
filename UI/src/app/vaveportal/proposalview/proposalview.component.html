<ng-snotify></ng-snotify>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
<div class="animated fadeIn">
  <div class="">
    <div class="card">
      <div class="card-header">
        <div class="row">
          <div class="col-lg-4">
            <h4><strong>TECHNICAL PROPOSAL DETAILS</strong></h4>
          </div>
          <div class="col-lg-8" style="margin: auto;">
            <h6 style="font-size: 12px; margin: 0px; font-weight:normal; float: right;">Please note - Below data is for only referance purpose, request you to please validate before using and also take customer approval.</h6>
          </div>
        </div>
      </div>
      <div class="card-block">
        <div class="row">
        <div class="col-lg-12">
          <div class="row margin-bottom-15">
            <div class="col-lg-4">
                Control Number : {{ proposalData.ProposalNumber }}
            </div>
            <div class="col-lg-4">
                Proposal Type : {{ proposalData.ProposalType }}
            </div>
            <div class="col-lg-4">
                <!-- Team Code : {{ proposalData.TeamCode }} -->
            </div>
          </div>
        </div>
      </div>
        <table class="table table-responsive table-bordered table-stripped text-center table-sm" style="table-layout: fixed; overflow-x: scroll;">
          <thead>
            <tr *ngIf="proposalData.ProposalType == 'Alternate'; else elseBlock">
              <th>Details</th>
              <!-- <th [attr.colspan]="colLength">Part Details</th> -->
              
              <ng-container *ngFor="let code of proposalData.PartC; let i = index">
                <th>Alternate {{i + 1}}</th>
              </ng-container>
            </tr>
            <ng-template #elseBlock>
              <tr>
                <th>Details</th>
                <ng-container *ngFor="let code of proposalData.PartC; let i = index; let p = index">
                  <th colspan="2" *ngIf="i % 2 == 0;">Inline {{ i/2 + 1 }}</th>
                </ng-container>
              </tr>
            </ng-template>
          </thead>
          <tbody>
            <tr>
                 <td>Yazaki Part No</td>   
                 <ng-container *ngFor="let code of proposalData.PartC">
                    <td>{{code.yazakipartnumber}}</td>
                 </ng-container> 
            </tr>
            <tr>
                  <td>Internal Part No</td>
                  <ng-container *ngFor="let code of proposalData.PartC">
                    <td>{{code.tpartnumber}}</td>
                  </ng-container>
            </tr>
            <tr>              
              <td>Comodity</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.Comodity}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Description</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.description}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Supplier Part No</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.supplierpartnumber}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Customer Part No</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.customerpartnumber}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Customer Name</td> 
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.customername}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>No of Poles</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.noofpoles}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Pin Rows / Layout</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.pinrows}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM'">               
              <td>Sealed / Unsealed</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.sealed}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM'">              
              <td>Gender</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.gender}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM' || commodityType == 'CAVITY SEAL' || commodityType == 'CAVITY PLUG'">                            
              <td>Series</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.series}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'TERM'">              
              <td>Terminal Plating</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.platingcolor}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType != 'TERM'">              
              <td>Color</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.color}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType != 'WIRE'">              
              <td>Material</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.material}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType != 'CONN'">              
              <td>Hybrid</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.hybrid}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'GROMMET'">              
              <td>Width (mm)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.width}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'CAVITY SEAL' || commodityType == 'CAVITY PLUG' || commodityType == 'GROMMET' || commodityType == 'TUBE' || commodityType == 'CLIP'">              
              <td>Length (mm)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.length}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Height (mm)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.height}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>UoM</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.uom}}</td>
              </ng-container>
            </tr>
            <tr>
              <td>Temperature Max (°C)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.maxtemp}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Temperature Min (°C)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.mintemp}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CAVITY PLUG' || commodityType == 'CAVITY SEAL'">
              <td>OD(outside) </td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.od}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'TERM' || commodityType == 'CAVITY SEAL'">              
              <td>Applicable Wire range</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.applicablewirerange}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'TERM'|| commodityType == 'CAVITY SEAL'" >              
              <td>Wire Insulation Dia range</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.wireinsulationdiarange}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'WIRE'">              
              <td>CSA</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.csa}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'WIRE'">              
              <td>No of Strands</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.noofstrands}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'WIRE'">              
              <td>Wire Standard</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.wirestandard}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'TUBE'">              
              <td>Wall Thickness(mm)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.wallthickness}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'TUBE'">              
              <td>Seal Dia(ɸ Inn- ɸout)</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.sealdia}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'GROMMET' || commodityType == 'CLIP'">              
              <td>Bundle Dia</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.bundledia}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'GROMMET' || commodityType == 'CLIP'">              
              <td>Whole size</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.wholesize}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'GROMMET' || commodityType == 'CLIP'">              
              <td>Panel Thickness</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.panelthickness}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'GROMMET'">
              <td>Grommet Hardness</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.grommethardness}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Applicable Terminal</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.terminal}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Applicable Seal</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.seal}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Applicable Dummy Plug</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.dummyplug}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN'">              
              <td>Applicable Accessory</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.accessory}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM'">              
              <td>Mating YPN</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.matingypn}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM'">              
              <td>Mating Supplier Part</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.matingsupplierpart}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType == 'CONN' || commodityType == 'TERM'">              
              <td>Mating Supplier Name</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.matingsuppliername}}</td>
              </ng-container>
            </tr>
            <tr *ngIf="commodityType != 'TUBE' && commodityType != 'WIRE'">              
              <td>Weight</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.weight}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Rank</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.rank}}</td>
              </ng-container>
            </tr>
            <tr>              
              <td>Remarks</td>
              <ng-container *ngFor="let code of proposalData.PartC">
                <td>{{code.remarks}}</td>
              </ng-container>
            </tr>
            
            <!-- <ng-container >
              <ng-container *ngFor="let doccode of code.ldocumentlist; let X=index"> -->
                <tr>
                  <td>Technical Document</td>
                  <td *ngFor="let code of proposalData.PartC" style="text-align: left;">
                    <ng-container *ngFor="let doccode of code.ldocumentlist; let X=index">
                    <ng-container *ngIf = "doccode.doc_type == 'PDF'; else tp">
                      <!-- <div class="row" style="display: inline;">
                        <ul style="margin: 10px;">    
                          <li style="display: inline;"> -->
                            <a (click)="ViewDocument(doccode.id)">
                              {{doccode.doc_name}}
                                <!-- <ng2-pdfjs-viewer class="fill" viewerId="MyID2" #viewer pdfSrc={{doccode.doc_path}}
                                  locale="de-AT" (onDocumentLoad)="pdfLoaded()" cursor="HAND" downloadFileName="doccode.doc_name" 
                                  scroll="W" spred="E" [download]=false [print] =false downloadFileName="mySample" zoom="auto"
                                  [errorOverride]="true" errorMessage="My error Message">
                                </ng2-pdfjs-viewer> -->
                            </a>
                          <!-- </li>
                        </ul>
                      </div> -->
                    </ng-container>
                    <ng-template #tp>
                      <!-- <div class="row" style="display: inline;" margin-left:> -->
                        <!-- <ul style="margin: 10px;">    
                            <li style="display: inline;">     -->
                                <a (click)="ViewDocument(doccode.id)">    
                                  {{doccode.doc_name}}
                                  <!-- <img src="{{doccode.doc_path}}" class="img" style="display:block;" width="90%" height="90%"> -->
                                  <!--width="240" height="170"-->
                                </a>
                                <br>    
                            <!-- </li>    
                        </ul>                                                     -->
                    <!-- </div> -->
                    </ng-template>
                    </ng-container>
                  </td>
                </tr>
              
          </tbody>
        </table>
        <div class="pull-right" *ngIf = "role != 'USER';">
          <button type="button" class="btn btn-success" (click)="ExportToExcel()">Export to Excel</button>
        </div>
        <ul style="float: right;" *ngIf="pager.pages && pager.pages.length" class="pagination">
          <li [ngClass]="{ disabled: pager.currentPage === 1 }"><a (click)="setPage(1)">First</a></li>
          <li [ngClass]="{ disabled: pager.currentPage === 1 }"><a (click)="setPage(pager.currentPage - 1)">Previous</a></li>
          <li *ngFor="let page of pager.pages" [ngClass]="{ active: pager.currentPage === page }">
            <a (click)="setPage(page)">{{ page }}</a>
          </li>
          <li [ngClass]="{ disabled: pager.currentPage === pager.totalPages }"><a (click)="setPage(pager.currentPage + 1)">Next</a></li>
          <li [ngClass]="{ disabled: pager.currentPage === pager.totalPages }"><a (click)="setPage(pager.totalPages)">Last</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<style>
  .img {      
        margin:6px 6px;      
        border: 4px solid #eee;      
        box-shadow:rgb(224, 199, 199) 1px 1px 8px 1px;      
        cursor: pointer      
    }      
    /* .modal-content {      
        width: 1000px !important;      
    }*/
    /* .imagediv{

    } */
    .imagediv ul { 
        padding:0; 
        /* width:1200px;  */
        margin:20px auto;
        margin-left: 80px;
    }      
    .imagediv li { 
        display:inline;
    } 

  .custom-file-input {
    padding: 5px;
    color: #999;
    border: 1px solid #000;
    vertical-align: middle;
    opacity: 1;
  }

  .custom-file-input::-webkit-file-upload-button {
    visibility: hidden;
  }

  .custom-file-input::before {
    content: 'Browse';
    color: #666;
    display: inline-block;
    background: #fff;
    border: 1px solid #999;
    border-radius: 3px;
    margin: -2px 0 -3px 425px;
    padding: 5px 20px;
    outline: none;
    white-space: nowrap;
    -webkit-user-select: none;
    cursor: pointer;
    text-align: center;
    text-shadow: 1px 1px #fff;
    font-weight: 700;
    font-size: 10pt;
  }

  .custom-file-input:hover::before {
    border-color: black;
  }

  .custom-file-input:active {
    outline: 0;
  }

  .custom-file-input:active::before {
    background: -webkit-linear-gradient(top, #e3e3e3, #f9f9f9);
  }

  form.ng-untouched.ng-pristine.ng-valid:focus,
  input#upload:focus {
    outline: none;
  }
</style>